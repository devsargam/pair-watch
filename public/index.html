<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sync Player</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="shell">
      <header class="header">
        <div class="title-block">
          <p class="subtitle">Two-person playback sync</p>
          <h1>Sync Player</h1>
          <p class="subtitle">Stream videos from the <code>videos/</code> folder with a shared timeline.</p>
        </div>
        <div class="status">
          <span class="dot" id="status-dot"></span>
          <span id="status">Connected</span>
        </div>
      </header>

      <section class="controls">
        <label class="field">
          <span>Video</span>
          <select id="video-select"></select>
        </label>
        <label class="toggle">
          <input id="play-all" type="checkbox" />
          <span>Play all</span>
        </label>
        <button id="resync" class="ghost">Resync</button>
      </section>

      <section class="main-grid">
        <div class="player-area">
          <video id="player" controls preload="metadata" crossorigin="anonymous"></video>
          <div class="meta">
            <div>Peers: <span id="peers">0</span></div>
            <div>Sync: <span id="sync-state">Idle</span></div>
          </div>
        </div>

        <div class="chat">
          <div class="call">
            <div class="call-label">Video call</div>
            <div class="call-grid">
              <video id="local-call" autoplay muted playsinline></video>
              <video id="remote-call" autoplay playsinline></video>
            </div>
            <div class="call-actions">
              <button id="call-start" class="ghost">Start</button>
              <button id="call-end" class="ghost">End</button>
            </div>
          </div>
          <div class="chat-header">Chat</div>
          <div id="chat-messages" class="chat-messages"></div>
          <form id="chat-form" class="chat-form">
            <input id="chat-input" type="text" placeholder="Say somethingâ€¦" autocomplete="off" />
            <button type="submit" class="primary">Send</button>
          </form>
        </div>
      </section>

      <section class="notes">
        <p id="hls-note"></p>
      </section>
    </main>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.18"></script>
    <script src="client.js" type="module"></script>
  </body>
</html>
